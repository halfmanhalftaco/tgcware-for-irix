--- libpng-1.2.5/scripts/makefile.sggcc.orig	2003-12-21 20:23:41.210000000 +0100
+++ libpng-1.2.5/scripts/makefile.sggcc	2003-12-21 20:35:20.310000000 +0100
@@ -1,4 +1,4 @@
-# makefile for libpng.a and libpng12.so, SGI IRIX with 'cc'
+# makefile for libpng.a and libpng12.so, SGI IRIX with 'gcc'
 # Copyright (C) 2001-2002 Glenn Randers-Pehrson
 # Copyright (C) 1995 Guy Eric Schalnat, Group 42, Inc.
 # For conditions of distribution and use, see copyright notice in png.h
@@ -11,10 +11,8 @@
 # Where the zlib library and include files are located
 #ZLIBLIB=/usr/local/lib32
 #ZLIBINC=/usr/local/include
-#ZLIBLIB=/usr/local/lib
-#ZLIBINC=/usr/local/include
-ZLIBLIB=../zlib
-ZLIBINC=../zlib
+ZLIBLIB=/usr/local/lib
+ZLIBINC=/usr/local/include
 
 LIBNAME=libpng12
 PNGMAJ = 0
@@ -27,12 +25,12 @@
 ABI=
 
 WARNMORE= # -g -DPNG_DEBUG=5
-CFLAGS=$(ABI) -I$(ZLIBINC) -O2 $(WARNMORE) -fPIC -mabi=n32
+CFLAGS=$(ABI) -I$(ZLIBINC) -O2 $(WARNMORE) -fPIC
 LDFLAGS=$(ABI) -L. -L$(ZLIBLIB) -lpng -lz -lm
-LDSHARED=cc $(ABI) -shared -soname $(LIBNAME).so.$(PNGMAJ) \
-  -set_version sgi$(PNGMAJ).0
-LDLEGACY=cc $(ABI) -shared -soname libpng.so.3 \
-  -set_version sgi$3.0
+LDSHARED=$(CC) $(ABI) -Wl,-rpath,/usr/local/lib -shared -Wl,-soname,$(LIBNAME).so.$(PNGMAJ) \
+  -Wl,-set_version,sgi$(PNGMAJ).0
+LDLEGACY=$(CC) $(ABI) -Wl,-rpath,/usr/local/lib -shared -Wl,-soname,libpng.so.3 \
+  -Wl,-set_version,sgi$3.0
 # See "man dso" for info about shared objects
 
 RANLIB=echo
